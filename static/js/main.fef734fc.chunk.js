(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){e.exports=n(310)},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),s=(n(121),n(15)),c=n(16),u=n(19),l=n(18),p=n(20),d=(n(122),n(114)),h=n(29),m=(n(123),n(108)),f=function(){function e(t,n,a){Object(s.a)(this,e),Object.assign(this,{id:t,title:n,action:a})}return Object(c.a)(e,[{key:"execute",value:function(e){return this.action(e)}}]),e}(),v=n(42),y=n(65),g=n.n(y),w=n(112),k=n.n(w),b=n(109),O=n.n(b),j=n(111),E=n.n(j),I=function(e){var t=e.onClick;return r.a.createElement(O.a,{style:{padding:0},"aria-label":"More","aria-haspopup":"true",onClick:t},r.a.createElement(E.a,{style:{color:"#27a6d6",fontSize:"40px"}}))},C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={opened:!1,target:null},n.openMenu=function(e){var t=e.currentTarget;n.setState({opened:!0,target:t})},n.closeMenu=function(){n.setState({opened:!1,target:null})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onActionClick",value:function(e){this.props.onAction(e,this.props.rowData),this.closeMenu()}},{key:"render",value:function(){var e=this,t=this.props.actions.length?r.a.createElement(I,{className:"grid-context-btn",onClick:this.openMenu}):null;return r.a.createElement("div",null,t,r.a.createElement(g.a,{anchorEl:this.state.target,open:this.state.opened,onClose:this.closeMenu},this.props.actions.map(function(t){return r.a.createElement(k.a,{key:t.id,onClick:e.onActionClick.bind(e,t)},t.title)})))}}]),t}(r.a.Component),x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).columnOptions={actionsColumn:{headerStyle:{width:"60px",textAlign:"center"},style:{textAlign:"center"},sortable:!1}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,a=e.onAction;return r.a.createElement(m.DataTable,{value:t},r.a.createElement(v.Column,{key:"name",field:"name",header:"name"}),r.a.createElement(v.Column,{key:"email",field:"email",header:"email"}),r.a.createElement(v.Column,{key:"password",field:"password",header:"password"}),r.a.createElement(v.Column,Object.assign({key:"actionsColumn",body:function(e){return t=e,o={actions:n,onAction:a},r.a.createElement(C,Object.assign({},o,{rowData:t}));var t,o},className:"grid-context-menu-column"},this.columnOptions.actionsColumn)))}}]),t}(r.a.Component);x.defaultProps={actions:[],selectedItems:[]};var S=n(6),A=n.n(S),U=n(30),N=n.n(U),M=n(37),D=n.n(M),H=A()({root:{width:"100px",marginLeft:"10px",padding:"5px"}})(D.a),L=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",userEmail:"",password:""},n.keydown=function(e){"Enter"!==e.key||e.target!==n.nameInput&&e.target!==n.emailInput&&e.target!==n.passwordInput||n.addUser()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydown,!1)}},{key:"nameInputHandler",value:function(e){this.nameInput=e.target,this.setState({userName:e.target.value})}},{key:"emailInputHandler",value:function(e){this.emailInput=e.target,this.setState({userEmail:e.target.value})}},{key:"passwordInputHandler",value:function(e){this.passwordInput=e.target,this.setState({password:e.target.value})}},{key:"clearInputValues",value:function(){this.nameInput&&this.emailInput&&this.passwordInput&&(this.nameInput.value="",this.emailInput.value="",this.passwordInput.value="")}},{key:"addUser",value:function(){var e=this.state,t=e.userName,n=e.userEmail,a=e.password;this.clearInputValues(),this.props.onUserAdd({password:a,email:n,name:t})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=t.root,a=t.input;return r.a.createElement("div",{className:n},r.a.createElement(N.a,{className:a,label:"Name",type:"text",onChange:function(t){return e.nameInputHandler(t)}}),r.a.createElement(N.a,{className:a,label:"Email",type:"text",onChange:function(t){return e.emailInputHandler(t)}}),r.a.createElement(N.a,{className:a,label:"Password",type:"password",onChange:function(t){return e.passwordInputHandler(t)}}),r.a.createElement(H,{onClick:function(){return e.addUser()},variant:"contained",color:"primary"},"Add user"))}}]),t}(r.a.Component),T=A()({root:{display:"flex",justifyContent:"center"},input:{margin:"0 0 0 10px"}})(L),W=n(113),B=n.n(W).a.create({baseURL:"https://quiet-dawn-70829.herokuapp.com"}),z=function(){var e;try{e=window.localStorage}catch(t){console&&console.error("LocalStorageUtil: window.localStorage is inaccessible")}return e},V=function(e){var t=z();return t?t.getItem(e):null},P=new(function(){function e(t){Object(s.a)(this,e),Object.assign(this,{httpService:t})}return Object(c.a)(e,[{key:"signIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={password:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",email:t};return this.httpService.post("/sign-in",n).then(function(t){var n=t.data;e.httpService.defaults.headers.common["Content-Type"]="application/json",function(e,t){var n=z();n&&n.setItem(e,t)}("authToken",n.token)})}},{key:"getUsersList",value:function(){var e=V("authToken");return this.httpService.get("/users",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.data})}},{key:"addUser",value:function(e){var t=V("authToken");return this.httpService.post("/users",e,{headers:{Authorization:"Bearer ".concat(t)}})}},{key:"deleteUser",value:function(e){var t=V("authToken");return this.httpService.delete("/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})}},{key:"resetSession",value:function(){!function(e){var t=z();t&&t.removeItem(e)}("authToken")}}]),e}())(B),q=A()({})(D.a),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},n.actions=[new f("delete","Delete user",function(e){return n.deleteUser(e)})],n.loadData=function(){return P.getUsersList().then(function(e){n.setState({users:e})}).catch(function(){return n.props.history.push("/")})},n.triggerAction=function(e,t){e.execute(t)},n.addUser=function(e){return P.addUser(e).then(function(){return n.loadData()})},n.logOut=function(){n.props.history.push("/"),P.resetSession()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"deleteUser",value:function(e){var t=this,n=e._id;return P.deleteUser(n).then(function(){return t.loadData()})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=t.root,a=t.upperBlock;return r.a.createElement("div",{className:n},r.a.createElement("div",{className:a},r.a.createElement(T,{onUserAdd:this.addUser}),r.a.createElement(q,{onClick:function(){return e.logOut()},variant:"contained",color:"secondary"},"Log Out")),r.a.createElement(x,{data:this.state.users,actions:this.actions,onAction:this.triggerAction}))}}]),t}(r.a.Component),R=A()({upperBlock:{display:"flex",justifyContent:"space-around"}})(J),$=A()({root:{width:"100px",margin:"5px 0"}})(D.a),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.keydown=function(e){"Enter"!==e.key||e.target!==n.passwordInput&&e.target!==n.passwordInput||n.signIn()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydown,!1)}},{key:"emailInputHandler",value:function(e){this.emailInput=e.target,this.setState({email:e.target.value})}},{key:"passwordInputHandler",value:function(e){this.passwordInput=e.target,this.setState({password:e.target.value})}},{key:"clearInputValues",value:function(){this.emailInput&&this.passwordInput&&(this.emailInput.value="",this.passwordInput.value="")}},{key:"signIn",value:function(){var e=this.state,t=e.email,n=e.password;this.clearInputValues(),this.props.onSignIn(t,n)}},{key:"render",value:function(){var e=this,t=this.props.classes.root;return r.a.createElement("div",{className:t},r.a.createElement(N.a,{label:"Email",type:"email",onChange:function(t){return e.emailInputHandler(t)}}),r.a.createElement(N.a,{label:"Password",type:"password",onChange:function(t){return e.passwordInputHandler(t)}}),r.a.createElement($,{onClick:function(){return e.signIn()},variant:"contained",color:"primary"}," Sign In"))}}]),t}(r.a.Component),F=A()({root:{display:"flex",flexDirection:"column"}})(_),G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).signIn=function(e,t){return P.signIn(e,t).then(function(){n.erorMessage&&n.erorMessage.removeAttribute("style"),n.props.history.push("/list")}).catch(function(){n.erorMessage=document.querySelector("#errorMessage"),n.erorMessage.setAttribute("style","display: block")})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=e.root,n=e.header,a=e.wrongCreds;return r.a.createElement("div",{className:t},r.a.createElement("p",{className:n}," Welcome to my test app "),r.a.createElement(F,{onSignIn:this.signIn}),r.a.createElement("p",{id:"errorMessage",className:a}," Email or password is incorrect "))}}]),t}(r.a.Component),K=A()({root:{width:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"},header:{font:"14px",fontWeight:"bold"},wrongCreds:{font:"14px",fontWeight:"bold",color:"red",display:"none"}})(G),Q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(h.a,{exact:!0,path:"/diovitsa/",component:K}),r.a.createElement(h.a,{path:"/diovitsa/list",component:R})))}}]),t}(r.a.Component),X=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Q,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,1,2]]]);
//# sourceMappingURL=main.fef734fc.chunk.js.map